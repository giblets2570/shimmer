<html>
	<head>

	</head>
	<body>
		<div class='container'>

		</div>
		<script type="text/javascript" src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.0.0-alpha1/jquery.min.js'></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/packery/1.4.3/packery.pkgd.min.js"></script>
		<script type="text/javascript">
			window.onload = function(e){
				var rectangles = [];
				var size = 400;
				var screen_width = screen.width;
				function compare(a,b) {
				  if (a.y < b.y)
				    return -1;
				  if (a.y > b.y)
				    return 1;
				  return 0;
				}
				var $container = $('.container').packery();
				for (var i = 50; i >= 0; i--) {
					var r = 150+Math.ceil(size*Math.random())
					rectangles.push({
						x: r,
						y: r*0.55
					});
				};
				// rectangles.sort(compare);
				var colors = ['red','blue','green','yellow','purple','magenta','orange','violet']
				var highest_left = 0;
				var highest_left = [{
					x: 0,
					y: 0
				}];
				for (var i = rectangles.length - 1; i >= 0; i--) {
					var elem = document.createElement('div');
					elem.style.cssText = "width: "+rectangles[i].x+"px; height: "+rectangles[i].y+"px; background: "+colors[i%colors.length]+"; padding: 10px";
					console.log(elem);
					var video = document.createElement('video');
					video.src = 'mov.webm';
					video.autoplay = true;
					video.width = rectangles[i].x;
					video.loop = true;
					elem.appendChild( video );
					$container.append(elem)
					$container.packery( 'appended', elem );
				};
				$container.packery();
			}
		</script>
	</body>
</html>